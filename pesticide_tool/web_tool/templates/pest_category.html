{% extends 'base.html' %}

{% block javascript %}
  <script type="text/javascript" src="{{STATIC_URL}}js/knockout/knockout-2.2.1.debug.js"></script>
  <script type="text/javascript"  src="{{STATIC_URL}}js/models.js"></script>
  <script type="text/javascript">
    function category_page()
    {
      var self = this;

      self.viewModel = null;
      self.configData = null;

      self.initialize = function()
      {
        self.viewModel = new categoriesViewModel();
        self.viewModel.initialize();
      };
      //This funciton initlizatizes the pager extension and knockout bindings. Our button data is in a json config file
      //and we don't want to call this funciton until it the Ajax request in the initialize function above completes.
      self.initPage = function()
      {
        ko.applyBindings(self.viewModel);
      };

      return(self);
    }
    app = category_page();
    app.initialize();
  </script>
{% endblock %}

{% block body %}

  <!-- Start of Choose your pest category page -->
    <div class="container" data-bind="page: {id: 'pest_category'}">
      <div class="row col-lg-12">
        <div class="text-center"><h3>Main Categories</h3></div>
        <div class="text-center"><h3>Is your pest a:</h3></div>
      </div>
      <!--
      For debugging the knockout data.
      <pre data-bind="text: JSON.stringify(ko.toJS($data), null, 2)"></pre>
      -->
      <div class="row" data-bind="foreach: categoryModels">
        <div class="col-md-3">
          <a class="btn btn-default pesticide_button" data-bind="attr: {href: '#pest_subcategory/' + href()}">
            <img data-bind="attr: {src: img()}"></img>
            <br />
            <h4><span data-bind="text: name()"></span></h4>
          </a>
        </div>
      </div>
      <div class="row-fluid span12">
        <br />
      </div>
    </div>

  <!-- End of choose your pest page -->
{% endblock %}
